{"ast":null,"code":"var _jsxFileName = \"/sandbox/src/real.server.tsx\";\nvar __jsx = React.createElement;\nimport App from \"./App\";\nimport React from \"react\";\nimport express from \"express\";\nimport { renderToString } from \"react-dom/server\";\nimport { StaticRouter } from \"react-router-dom\";\n\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\n\nconst cssLinksFromAssets = (public_path, assets, entrypoint) => {\n  return assets[entrypoint] ? assets[entrypoint].css ? assets[entrypoint].css.map(asset => `<link rel=\"stylesheet\" href=\"${public_path}${asset}\">`).join(\"\") : \"\" : \"\";\n};\n\nconst jsScriptTagsFromAssets = (public_path, assets, entrypoint, extra = \"\") => {\n  return assets[entrypoint] ? assets[entrypoint].js ? assets[entrypoint].js.map(asset => `<script src=\"${public_path}${asset}\"${extra}></script>`).join(\"\") : \"\" : \"\";\n};\n\nconst server = express();\nexport const renderApp = async (req, res) => {\n  const public_path = `https://${CODESANDBOX_HOST}`;\n  const context = {};\n  const markup = renderToString(__jsx(StaticRouter, {\n    location: req.url,\n    context: context,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, __jsx(App, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  })));\n  const html = // prettier-ignore\n  `<!doctype html>\n      <html lang=\"\">\n      <head>\n          <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n          <meta charSet='utf-8' />\n          <title>Welcome to Razzle</title>\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n          <script type=\"text/javascript\">\n            window.PUBLIC_PATH = '${public_path}';\n          </script>\n          ${cssLinksFromAssets(public_path, assets, 'client')}            \n      </head>\n      <body>\n          <div id=\"root\">${markup}</div>\n          <!-- razzle_static_js -->\n          ${jsScriptTagsFromAssets(public_path, assets, 'client', ' defer crossorigin')}\n      </body>\n  </html>`;\n  return {\n    html,\n    context\n  };\n};\nserver.disable(\"x-powered-by\").use(express.static(process.env.RAZZLE_PUBLIC_DIR)).get(\"/*\", async (req, res) => {\n  const {\n    html,\n    context\n  } = await renderApp(req, res);\n\n  if (context.url) {\n    // Somewhere a `<Redirect>` was rendered\n    return res.redirect(301, context.url);\n  }\n\n  res.send(html);\n});\nexport default server;","map":{"version":3,"sources":["/sandbox/src/real.server.tsx"],"names":["App","React","express","renderToString","StaticRouter","assets","require","process","env","RAZZLE_ASSETS_MANIFEST","cssLinksFromAssets","public_path","entrypoint","css","map","asset","join","jsScriptTagsFromAssets","extra","js","server","renderApp","req","res","CODESANDBOX_HOST","context","markup","url","html","disable","use","static","RAZZLE_PUBLIC_DIR","get","redirect","send"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,OAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,SAASC,cAAT,QAA+B,kBAA/B;AACA,SAASC,YAAT,QAA6B,kBAA7B;;AAEA,MAAMC,MAAM,GAAGC,OAAO,CAACC,OAAO,CAACC,GAAR,CAAYC,sBAAb,CAAtB;;AAEA,MAAMC,kBAAkB,GAAG,CAACC,WAAD,EAAcN,MAAd,EAAsBO,UAAtB,KAAqC;AAC9D,SAAOP,MAAM,CAACO,UAAD,CAAN,GACHP,MAAM,CAACO,UAAD,CAAN,CAAmBC,GAAnB,GACER,MAAM,CAACO,UAAD,CAAN,CAAmBC,GAAnB,CACGC,GADH,CAEKC,KAAD,IAAY,gCAA+BJ,WAAY,GAAEI,KAAM,IAFnE,EAIGC,IAJH,CAIQ,EAJR,CADF,GAME,EAPC,GAQH,EARJ;AASD,CAVD;;AAYA,MAAMC,sBAAsB,GAAG,CAC7BN,WAD6B,EAE7BN,MAF6B,EAG7BO,UAH6B,EAI7BM,KAAK,GAAG,EAJqB,KAK1B;AACH,SAAOb,MAAM,CAACO,UAAD,CAAN,GACHP,MAAM,CAACO,UAAD,CAAN,CAAmBO,EAAnB,GACEd,MAAM,CAACO,UAAD,CAAN,CAAmBO,EAAnB,CACGL,GADH,CAEKC,KAAD,IAAY,gBAAeJ,WAAY,GAAEI,KAAM,IAAGG,KAAM,YAF5D,EAIGF,IAJH,CAIQ,EAJR,CADF,GAME,EAPC,GAQH,EARJ;AASD,CAfD;;AAiBA,MAAMI,MAAM,GAAGlB,OAAO,EAAtB;AAEA,OAAO,MAAMmB,SAAS,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC3C,QAAMZ,WAAW,GAAI,WAAUa,gBAAiB,EAAhD;AAEA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,MAAM,GAAGvB,cAAc,CAC3B,MAAC,YAAD;AAAc,IAAA,QAAQ,EAAEmB,GAAG,CAACK,GAA5B;AAAiC,IAAA,OAAO,EAAEF,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAD2B,CAA7B;AAMA,QAAMG,IAAI,GACR;AACC;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoCjB,WAAY;AAChD;AACA,YAAYD,kBAAkB,CAACC,WAAD,EAAcN,MAAd,EAAsB,QAAtB,CAAgC;AAC9D;AACA;AACA,2BAA2BqB,MAAO;AAClC;AACA,YAAYT,sBAAsB,CAACN,WAAD,EAAcN,MAAd,EAAsB,QAAtB,EAAgC,oBAAhC,CAAsD;AACxF;AACA,UAnBE;AAqBA,SAAO;AAAEuB,IAAAA,IAAF;AAAQH,IAAAA;AAAR,GAAP;AACD,CAhCM;AAkCPL,MAAM,CACHS,OADH,CACW,cADX,EAEGC,GAFH,CAEO5B,OAAO,CAAC6B,MAAR,CAAexB,OAAO,CAACC,GAAR,CAAYwB,iBAA3B,CAFP,EAGGC,GAHH,CAGO,IAHP,EAGa,OAAOX,GAAP,EAAYC,GAAZ,KAAoB;AAC7B,QAAM;AAAEK,IAAAA,IAAF;AAAQH,IAAAA;AAAR,MAAoB,MAAMJ,SAAS,CAACC,GAAD,EAAMC,GAAN,CAAzC;;AAEA,MAAIE,OAAO,CAACE,GAAZ,EAAiB;AACf;AACA,WAAOJ,GAAG,CAACW,QAAJ,CAAa,GAAb,EAAkBT,OAAO,CAACE,GAA1B,CAAP;AACD;;AAEDJ,EAAAA,GAAG,CAACY,IAAJ,CAASP,IAAT;AACD,CAZH;AAcA,eAAeR,MAAf","sourcesContent":["import App from \"./App\";\nimport React from \"react\";\nimport express from \"express\";\nimport { renderToString } from \"react-dom/server\";\nimport { StaticRouter } from \"react-router-dom\";\n\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\n\nconst cssLinksFromAssets = (public_path, assets, entrypoint) => {\n  return assets[entrypoint]\n    ? assets[entrypoint].css\n      ? assets[entrypoint].css\n          .map(\n            (asset) => `<link rel=\"stylesheet\" href=\"${public_path}${asset}\">`\n          )\n          .join(\"\")\n      : \"\"\n    : \"\";\n};\n\nconst jsScriptTagsFromAssets = (\n  public_path,\n  assets,\n  entrypoint,\n  extra = \"\"\n) => {\n  return assets[entrypoint]\n    ? assets[entrypoint].js\n      ? assets[entrypoint].js\n          .map(\n            (asset) => `<script src=\"${public_path}${asset}\"${extra}></script>`\n          )\n          .join(\"\")\n      : \"\"\n    : \"\";\n};\n\nconst server = express();\n\nexport const renderApp = async (req, res) => {\n  const public_path = `https://${CODESANDBOX_HOST}`;\n\n  const context = {};\n  const markup = renderToString(\n    <StaticRouter location={req.url} context={context}>\n      <App />\n    </StaticRouter>\n  );\n\n  const html =\n    // prettier-ignore\n    `<!doctype html>\n      <html lang=\"\">\n      <head>\n          <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n          <meta charSet='utf-8' />\n          <title>Welcome to Razzle</title>\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n          <script type=\"text/javascript\">\n            window.PUBLIC_PATH = '${public_path}';\n          </script>\n          ${cssLinksFromAssets(public_path, assets, 'client')}            \n      </head>\n      <body>\n          <div id=\"root\">${markup}</div>\n          <!-- razzle_static_js -->\n          ${jsScriptTagsFromAssets(public_path, assets, 'client', ' defer crossorigin')}\n      </body>\n  </html>`;\n\n  return { html, context };\n};\n\nserver\n  .disable(\"x-powered-by\")\n  .use(express.static(process.env.RAZZLE_PUBLIC_DIR))\n  .get(\"/*\", async (req, res) => {\n    const { html, context } = await renderApp(req, res);\n\n    if (context.url) {\n      // Somewhere a `<Redirect>` was rendered\n      return res.redirect(301, context.url);\n    }\n\n    res.send(html);\n  });\n\nexport default server;\n"]},"metadata":{},"sourceType":"module"}